{
    "id": "ExtBox1-ext-gen2416",
    "type": "controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|init": "",
        "designer|userClassName": "Ball"
    },
    "customConfigs": [],
    "designerId": "8c6f99fe-29e7-4209-af7d-638350f6e65a",
    "$viewOrder": 0,
    "expanded": true,
    "cn": [
        {
            "id": "ExtBox1-ext-gen6441",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "checkCollisions",
                "designer|params": [
                    "ball"
                ],
                "implHandler": "var leftPaddle  = MyApp.app.paddleLeft.element.getBox(),\n    rightPaddle = MyApp.app.paddleRight.element.getBox(),\n    ballBox     = ball.getBox(),\n    ballHeight  = ball.getHeight(),\n    collisionX  = false,\n    collisionY  = false,\n    surfaceBox;\n\nif (!MyApp.app.surface) { \n    MyApp.app.surface = Ext.ComponentQuery.query('viewport > panel')[0].element.down('.x-panel-inner'); \n}\nsurfaceBox = MyApp.app.surface.getBox();\n\n//check collision with borders\nif (ballBox.left < surfaceBox.left) {\n    MyApp.app.dispatch({\n        controller : 'Referee',\n        action     : 'incrementScore',\n        args       : [ true ]\n    });\n\n    return false;\n}\nelse if (ballBox.right > surfaceBox.right) {\n    MyApp.app.dispatch({\n        controller : 'Referee',\n        action     : 'incrementScore',\n        args       : [ false ]\n    });\n\n    return false;\n}\nif (ballBox.top < surfaceBox.top || ballBox.bottom > surfaceBox.bottom) {\n    collisionY = true;\n\n    MyApp.app.dispatch({\n        controller : 'Audio',\n        action     : 'playCollision'\n    });\n}\n//check collision with paddles\nif (Ball.direction[0] < 0) {\n    if (ballBox.bottom >= leftPaddle.top && ballBox.top <= leftPaddle.bottom) {\n        if (ballBox.left <= leftPaddle.right && ballBox.left >= leftPaddle.right - Ball.speed - Ball.xConstant) { \n            collisionX = true;\n            Ball.checkSpeed();\n            this.getDeflection(ballBox, leftPaddle);\n\n            MyApp.app.dispatch({\n                controller : 'Audio',\n                action     : 'playPong'\n            });\n        }\n    }\n}\nelse {\n    if (ballBox.bottom >= rightPaddle.top && ballBox.top <= rightPaddle.bottom) {\n        if (ballBox.right >= rightPaddle.left && ballBox.right <= rightPaddle.left + Ball.speed + Ball.xConstant) { \n            collisionX = true; \n            Ball.checkSpeed();\n            this.getDeflection(ballBox, rightPaddle);\n\n            MyApp.app.dispatch({\n                controller : 'Audio',\n                action     : 'playPong'\n            });\n        }\n    }\n}\n\n//change ball direction, if necessary\nthis.getDirection(collisionX, collisionY);\n\nreturn true;",
                "designer|userClassName": "checkCollisions"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen6629",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "update",
                "designer|params": [
                    "ball"
                ],
                "implHandler": "        var el  = ball.element,\n            pos = el.getXY(),\n            xy = Ball.getXY(pos);\n\n        el.setXY(xy);\n        MyApp.controller.Paddle.prototype.updateCPU(xy);\n\n        //check XY coordinates to see if player has scored\n        this.checkCollisions(el);",
                "designer|userClassName": "update"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen11772",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getDirection",
                "designer|params": [
                    "collisionX",
                    "collisionY"
                ],
                "implHandler": "        if (collisionX) { \n            Ball.direction[0] *= -1; \n            Ball.vollies++;\n        }\n        if (collisionY) { Ball.direction[1] *= -1; }",
                "designer|userClassName": "getDirection"
            },
            "customConfigs": [],
            "expanded": true
        },
        {
            "id": "ExtBox1-ext-gen5076",
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getDeflection",
                "designer|params": [
                    "ball, paddle"
                ],
                "implHandler": "        var ballMiddle = ball.top + (ball.height / 2),\n            paddleSection = paddle.height / 5;\n\n        if (ballMiddle <= paddle.top + paddleSection || ballMiddle >= paddle.bottom - paddleSection) {\n            Ball.angle = Ball.angles.high;\n            return;\n        }\n\n        paddleSection *= 2;\n\n        if (ballMiddle <= paddle.top + paddleSection || ballMiddle >= paddle.bottom - paddleSection) {\n            Ball.angle = Ball.angles.mid;\n            return;\n        }\n\n        Ball.angle = Ball.angles.low;\n        Ball.resetSpeed(); //only an low angle returns\n        return;",
                "designer|userClassName": "getDeflection"
            },
            "customConfigs": [],
            "expanded": true
        }
    ]
}